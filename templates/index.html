<html lang="en">
<head>
    <title>Welcome to My Company</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(() => {
            $.ajax({url: "/departments/departments/", async: false}).then(
                (result) => {
                    let html = "";
                    result.forEach((department) => {
                        html += '<tr>' +
                            `<td>${department.name}</td>` +
                            `<td>${department.num_of_employees}</td>` +
                            `<td>${department.average_salary}</td>` +
                            `<td>${department.retired_employees.join(", ")}</td>` +
                            '</tr>';
                    })
                    $("#table_body").html(html);
                }
            )
        })
    </script>
    <style>
        table {
            width: 80%;
            border-style: double;
            border-width: 2px;
            border-radius: 10px;
            padding: 5px;
        }
        table thead {
            font-weight: bold;
        }
        td {
            padding-bottom: 10px;
        }
    </style>
</head>
<body>

    <h3>Basic Information</h3>
    <table>
        <thead>
            <tr>
                <td>
                    Department
                </td>
                <td>
                    Total Employees
                </td>
                <td>
                    Average Salary
                </td>
                <td>
                    Retired Employees
                </td>
            </tr>
        </thead>
        <tbody id="table_body">

        </tbody>
    </table>
</body>
</html>
